小红书内容清理工具（Userscript）

一个基于 TypeScript 开发的油猴脚本，用于在小红书「赞过的内容」页面中，批量、可控地清理点赞记录。

⚠️ 本脚本仅用于个人内容整理与学习研究，请勿用于任何违反平台规则的用途。

⸻

✨ 功能特性
• ✅ 仅在「赞过的内容」页面生效
• ✅ 智能检测并自动滚动加载更多内容
• ✅ 实时进度条显示处理进度
• ✅ 支持最大处理数量限制（防止误操作）
• ✅ 现代化 UI 设计（渐变按钮 + 动画弹窗）
• ✅ 点击遮罩关闭弹窗
• ✅ 关闭前确认提醒（运行中）
• ✅ 悬浮进度条实时反馈
• ✅ 使用 TypeScript 编写，结构清晰，易维护

⸻

📍 生效页面

脚本仅在以下页面生效：

https://www.xiaohongshu.com/user/profile/{userId}?tab=liked

    •	{userId} 为任意用户 ID
    •	非「赞过」页面不会注入 UI，也不会执行任何逻辑

⸻

🖱 使用方式

1. 安装浏览器扩展 Tampermonkey
2. 从 Greasy Fork 安装本脚本
3. 打开任意用户的「赞过的内容」页面
4. 在顶部 Tabs 最右侧看到 「🧹 内容清理」 按钮
5. 点击按钮，弹出设置弹窗
6. 配置最大处理数量后点击「开始清理」
7. 弹窗自动关闭，右上角显示实时进度条
8. 达到设定数量后自动停止，进度条 2 秒后消失

⸻

⚙️ 功能说明

**配置弹窗**

- 最大处理数量：本次运行最多处理多少个点赞
- 关闭按钮：关闭弹窗（运行中会提示确认）
- 开始清理：启动清理任务并显示进度条

**进度条**

- 实时显示：百分比进度 + 已处理数量
- 呼吸灯效果：表示任务正在运行
- 可手动关闭：点击 × 按钮隐藏进度条
- 自动隐藏：完成后 2 秒自动消失

**智能滚动**

- 自动检测当前区域是否还有待处理项目
- 如果当前区域已全部处理完，自动滚动加载更多
- 平滑滚动体验，不会突兀跳转

⸻

🧱 技术栈
• TypeScript
• Bun（构建 / 打包）
• Tampermonkey Userscript
• 原生 DOM API（无第三方依赖）

⸻

📦 本地开发 & 构建

目录结构

xhs-cleaner/
├─ src/
│ ├─ index.ts # Userscript 入口
│ ├─ state.ts # 全局状态
│ ├─ logic.ts # 核心清理逻辑 + 自动滚动
│ ├─ ui-tab.ts # Tabs 按钮
│ ├─ ui-modal.ts # 配置弹窗
│ ├─ ui-progress.ts # 悬浮进度条
│ └─ utils.ts # 工具函数
├─ dist/
│ └─ xhs-cleaner.user.js
└─ package.json

构建命令

bun install
bun run build

构建完成后生成：

dist/xhs-cleaner.user.js

该文件可直接导入 Tampermonkey 或上传至 Greasy Fork。

⸻

⚠️ 注意事项
• 脚本默认间隔 1 秒处理一次，避免高频操作
• 建议单次处理数量不要过大（推荐 50-100）
• 小红书页面为 SPA，脚本使用 MutationObserver 监听页面变化
• 页面结构更新可能导致脚本失效，需要适配调整
• 进度条可随时手动关闭，不影响后台运行

⸻

🎨 UI 特性
• 渐变色按钮设计，hover 有上浮动画
• 弹窗带淡入和上滑动画效果
• 背景模糊（backdrop-filter）提升视觉层次
• 进度条带呼吸灯效果，实时反馈运行状态
• 所有交互元素都有过渡动画，体验流畅

⸻

🛠 可扩展方向（TODO）
• 随机延迟（模拟人工操作）
• 配置持久化（localStorage）
• 模式切换（取消收藏 / 点赞）
• 只处理最近 N 天的内容
• 操作日志导出功能

⸻

📄 License

MIT License

⸻

如果你在使用过程中遇到问题，或有功能建议，欢迎提交 Issue 或自行 Fork 修改。
